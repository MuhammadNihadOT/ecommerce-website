<section>
    <div class="container">
        <form action="" id="checkout-form" name="checkout-form">
            <div class="row d-flex" style="justify-content: space-around;align-items: center;">
                <div class=" w-50 mt-5">
                    <div class="text-center w-100">
                        <h4 class="font-weight-bold">Enter Delivery Details</h4>
                    </div>
                    <div class="col-12">
                        <label>Address</label>
                        <input type="text" class="form-control" name="address" />
                    </div>
                    <div class="col-12">
                        <label>Pincode</label>
                        <input type="number" class="form-control" name="pincode" />
                    </div>
                    <div class="col-12">
                        <label>Mobile</label>
                        <input type="number" class="form-control" name="mobile" />
                    </div>
                    <div>
                        <input type="text" value="{{user._id}}" name="userId" hidden>
                    </div>
                </div>
                <div class="">
                    <div class="mt-5" style="border: 1px solid #a4ada4; width: 360px; height: 225px;">
                        {{#each total}}
                        <h5 class="text-center pt-3">Total Amount: Rs.{{this.total}}</h5>
                        {{/each}}
                        <hr class="w-75">
                        <a href="" class="pl-4" style="text-decoration: none;color:black;">Payment method</a><br>
                        <input class="mt-2 ml-4" type="radio" name="payment" value="COD"> COD <br>
                        <input class="ml-4" type="radio" name="payment" value="online-payment"> Online Payment <br>
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary mt-3 float-right mr-5">Check Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>

<script>
    $('#checkout-form').submit((e) => {
        e.preventDefault()
        $.ajax({
            url: '/place-order',
            method: 'post',
            data: $('#checkout-form').serialize(),
            success: (response) => {

                if (response.status) {
                    alert('Order Placed Successfully')
                    location.href = '/order-success'
                }
            }
        })
    })
</script>